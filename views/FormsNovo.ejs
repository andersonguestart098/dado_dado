<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulario <%- pegar.toUpperCase() %></title>
    <link rel="icon" sizes="any" type="image/svg+xml" href="/logoce.svg">
    <style>
        input[type='radio'] {
            -webkit-appearance:none;
            width:20px;
            height:20px;
            border:1px solid darkgray;
            border-radius:50%;
            outline:none;
            box-shadow:0 0 5px 0px gray inset;
        }
        input[type='radio']:hover {
            box-shadow:0 0 5px 0px orange inset;
        }
        input[type='radio']:before {
            content:'';
            display:block;
            width:100%;
            height:100%;
            border-radius:50%;    
        }
        input[type='radio']:checked:before {
            background:#058FED;
        }
      
        body {
            background-color: #053c5e;
        }
        #center {
            margin: auto;
            margin-top: 10%;
            width: 60%;
            padding: 10px;
            background-color: whitesmoke;
            border-radius: 10px;
        }
        #item-grid{ 
            margin-left: 10%;
            display: grid;
            grid-template-columns: 1fr 1fr;
            grid-template-rows: 1.7fr 1fr;
            gap: 0px 0px;
            grid-auto-flow: row;
            grid-template-areas:
                ". .",
                ". ."
                "a a";
            }

        .a { 
            grid-area: a; 
        }

        input:not([type=radio]) {
            padding: 5px;
            border-radius: 5px;
            border-color: #053c5e9d;
            border-width: 2px;
            font-size: small;
            width: 250px;
        }
        select {
            padding: 5px;
            width: 265px;
            border-width: 2px;
            border-color: #053c5e9d;
            border-radius: 5px;
            color: #053c5e;
            height: 35px;
            
        }
        select * {
            color: #053c5e;
        }
        label {
            color: #032941;
            font-family: 'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif;
            font-size: large;
            display:inline-block;
            margin-top: 10px;
            margin-bottom: 5px;
        }
        label:not(#option):after {
            content: " *";
            color: red;
        }
        h1 {
            color: #032941;
            text-align: center;
            font-family: 'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif;
            border-bottom: 2px solid #032941;
        }

        #logo svg {
            width: 50px;
            height: 50px;
        }
        #logo {
            float: left;
            position: absolute;
            width: 100%;
            left: 15px;
            top: 10px;
            z-index: 2;
        }
        #option {
            font-size: small;
        }
        p {
            margin-top: 90px;
        }
        #obsinput {
          padding: 5px 100% 90px 5px;
        }
      @media only screen and (max-width: 700px) {
            body {
                background-color: lightblue;
                margin: 0;
            }
            #item-grid {
                display: block;
            }
            #center {
                margin: 0;
                margin-top: 100px;
                width: 100%;
            }
            p {
                margin-top: 100px;
            }
            #obsinput {
              padding: 5px 50px 90px 5px;
            }
        }
    </style>
  <script src="https://code.iconify.design/iconify-icon/1.0.2/iconify-icon.min.js"></script>
  <link href='icons.css' rel='stylesheet'>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-maskmoney/3.0.2/jquery.maskMoney.min.js"></script>
</head>
<body>
    <div id="logo">
        <?xml version="1.0" encoding="UTF-8"?>
<svg id="Camada_1" data-name="Camada 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 305.47 164.49">
  <defs>
    <style>
      .cls-1 {
        fill: #058FED;
      }
    </style>
  </defs>
  <path class="cls-1" d="M138.7,27.3c-1.15,1.15-15.44,21.99-15.44,21.99,0,0-5.11,9.13-11.37,3.53l-.13-.09c-8.29-8.4-19.72-12.61-31.52-12.61-24.21,0-44.13,19.92-44.13,44.13s19.92,44.13,44.13,44.13c14.23,0,27.62-6.88,35.89-18.46l40.33-69.8h0C170.83,14.98,196.86,0,225.81,0c37.43,0,70.02,23.15,78.52,59.6l.54,2.55c.4,1.99,.61,4.02,.61,6.05,0,16.52-13.48,30.17-25.15,30.43l-96.66-1.15-3.29-.03s-1.68,.17-1.33-.5c8.51-15.85,9.5-19.01,13.89-26.71,2.48-4.91,10.22-4.77,16.13-4.9h.11s40.12,0,49.86-.58,12.04-4.01,8.6-9.74h0c-8.31-12.99-22.98-20.63-38.4-20.63s-30.01,7.99-38.29,21.12l-2.4,4.1-34.39,61.9c-13.96,26.49-43.41,42.98-73.36,42.98C36.48,164.49,0,128.01,0,83.68S36.48,2.87,80.81,2.87c21.79,0,42.69,8.82,57.89,24.43Z"/>
  <path class="cls-1" d="M305.39,124.37c-8.9-5.7-18.89-8.21-29.69-7.25-6.66,.59-13.1,2.71-18.95,5.96l-.07,.04c-7.94,4.21-16.9,6.51-26.16,6.51-16.24,0-31.17-7.54-42.3-19.36-7.08-7.51-11.16-.87-11.16-.87l-13.33,24.22c16.92,19.59,41.56,30.87,67.45,30.87,30.06,0,57.78-14.95,74.22-40.12h0Z"/>
</svg>
    </div>
    <div id="center">
        <h1>Solicitação de Faturamento </h1>
        <div id="item-grid">
            <div id="item1">
                <div id="collun1">
                  <%- include('./formularioFinanceiroSetores/setor2.ejs') %>
                </div>    
            </div>

<!--
---------------------------------------------------------------------
█████████████████████████████████████████████████████████████████████
█████████████████████████████████████████████████████████████████████
█████████████████████████████████████████████████████████████████████
█████████████████████████████████████████████████████████████████████          
---------------------------------------------------------------------
-->
          
            <div id="item1">
              <div id="collun2">
                   <%- include('./formularioFinanceiroSetores/setor1.ejs') %>
                </div>  
            </div>

          
          <div id="obs">
            <div class="a">
                <label id="obs">Observação</label><br>
                <input name="obs" id="obsinput">
              
                <p style="text-align: center;"><a onclick="enviar()" style="text-decoration: none; color:#145b88; font-family: 'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif; margin-left: 70%; padding: 15px; background: #058FED; border-radius: 5px;">ENVIAR</a></p>
            </div>
          </div>
        </div>
      </div> 
    <script>
        function check(input, ocult) {
          for(let i = 0; i <= ocult.length -1; i++) {
          switch(input.value) {
            case "entrega_futura":
              document.querySelector("#formapgto").style.display = "block"
              document.querySelector("#formapgto").style.zIndex = "1"
              document.querySelector(ocult[i]).value = ""
              document.querySelector(ocult[i]).style.display = "none"
              document.querySelector(ocult[i]).style.zIndex = "-999"
              break

            case "Bonificado":
            case "remessa_materiais":
              document.querySelector("#entregaretira").style.display = "block"
              document.querySelector("#entregaretira").style.zIndex = "1"
              document.querySelector(ocult[i]).value = ""
              document.querySelector(ocult[i]).style.display = "none"
              document.querySelector(ocult[i]).style.zIndex = "-999"
              break
              
            case "normal":
              document.querySelector(ocult[i]).value = ""
              document.querySelector(ocult[i]).style.display = "none"
              document.querySelector(ocult[i]).style.zIndex = "-999"
              document.querySelector("#formapgto").style.display = "block"
              document.querySelector("#formapgto").style.zIndex = "1"
              
              document.querySelector("#localcobranca").style.display = "block"
              document.querySelector("#localcobranca").style.zIndex = "1"

              document.querySelector("#entregaretira").style.display = "block"
              document.querySelector("#entregaretira").style.zIndex = "1"
              break
              
            case "avista": 
              document.querySelector(ocult[i]).value = ""
              document.querySelector("#pgtoavista").style.display = "block"
              document.querySelector("#pgtoavista").style.zIndex = "1"
              document.querySelector(ocult[i]).value = null
              document.querySelector(ocult[i]).style.display = "none"
              document.querySelector(ocult[i]).style.zIndex = "-999"
              break

            
            case "cartao": 
              document.querySelector("#bandeiracartao").style.display = "block"
              document.querySelector("#bandeiracartao").style.zIndex = "1"
              document.querySelector("#parcelas").style.display = "block"
              document.querySelector("#parcelas").style.zIndex = "1"
              document.querySelector(ocult[i]).value = ""
              document.querySelector(ocult[i]).style.display = "none"
              document.querySelector(ocult[i]).style.zIndex = "-999"
              break
              
            case "defaultFPgo":
              document.querySelector(ocult[i]).value = ""
              document.querySelector("#pgtoavista").style.display = "none"
              document.querySelector("#pgtoavista").style.zIndex = "-999"
              break

            case "transportadora":
              document.querySelector(ocult[i]).value = ""
              document.querySelector(ocult[i]).style.display = "none"
              document.querySelector(ocult[i]).style.zIndex = "-999"
              document.querySelector("#freteConta").style.display = "block"
              document.querySelector("#freteConta").style.zIndex = "1"
            break
              
            case "Deposito Programado":
            case "faturado":
            case "Nao":
            case "depositoprogramado":
            case "chequeprogramado":
            case "cartaovendas":
            case "retirada":
            case "semPgo":
              document.querySelector(ocult[i]).value = ""
              document.querySelector(ocult[i]).style.display = "none"
              document.querySelector(ocult[i]).style.zIndex = "-999"
              break

            
            case "Entrega Imediata":
              document.querySelector(ocult[i]).style.display = "block"
              document.querySelector(ocult[i]).style.zIndex = "1"
              document.querySelector("#freteConta").style.display = "none"
              document.querySelector("#freteConta").style.zIndex = "-999"
              break
              
            case "Entrega Agendada":
              document.querySelector(ocult[i]).style.display = "block"
              document.querySelector(ocult[i]).style.zIndex = "1"
              document.querySelector("#freteConta").style.display = "none"
              document.querySelector("#freteConta").style.zIndex = "-999"
              break
              
            case "Sim": 
            case "entregaAgendada": 
              document.querySelector(ocult[i]).style.display = "block"
              document.querySelector(ocult[i]).style.zIndex = "1"
              break
              
            case "defaultREntrega":
              document.querySelector(ocult[i]).value = ""
              document.querySelector(ocult[i]).style.display = "none"
              document.querySelector(ocult[i]).style.zIndex = "-999"
              break
              
          }
        }
      }
    </script>
    <script>
        $(function() {
            $('.orcamento').maskMoney();
            $('.valorfrete').maskMoney();

          
        })
    </script>
    <script>
      let textInfo = "..."
      let obj={}
      function enviar() {
        let pegar = "<%= pegar %>"
        obj = {
          numeronf: "...",
          exped : pegar,       
          quemrecebeu: "...",
          vendedor:  document.querySelector("#vendedor").value,
          nropedido:
document.querySelector("#orcamento").value,
          cliente:  document.querySelector("#cliente").value,
          valordopedido:  document.querySelector('#valordoPedido').value,
          tipodefaturamento:  document.querySelector('input[name="tipoFaturamento"]:checked').value,
          formapgto:  document.querySelector('input[name="formaPgo"]:checked') == null ? textInfo : formaPagamentoVerificação(),
          vendafrete: document.querySelector('input[name="vendaFrete"]:checked') == null ? textInfo : document.querySelector('input[name="vendaFrete"]:checked').value,
          retiraentrega: document.querySelector('input[name="entregaretira"]:checked') == null ? textInfo : document.querySelector('input[name="entregaretira"]:checked').value,
          
          localdaentrega: document.querySelector('input[name="entregaEndereco"]:checked') == null ? textInfo : document.querySelector('input[name="entregaEndereco"]:checked').value,
          
          localdecobranca: document.querySelector('input[name="localcobranca"]:checked') == null ? textInfo : document.querySelector('input[name="localcobranca"]:checked').value,
          
          obs: document.querySelector("#obsinput").value == '' ? "nenhuma observação" : document.querySelector("#obsinput").value,
          fretedestacado: document.querySelector('input[name="tipofrete"]:checked') == null ? textInfo : document.querySelector('input[name="tipofrete"]:checked').value,
          valorfrete: document.querySelector('#valorFreteInput') == null ? textInfo : document.querySelector('#valorFreteInput').value,
          
          dataentrega: document.querySelector("#entregaAgendadaInput").value == null ? textInfo : document.querySelector("#entregaAgendadaInput").value,
          operadornf: "...",
          statusnf: "PENDENTE",
          obsfinanceiro: "...",
          
          freteconta: document.querySelector('input[name="freteConta"]:checked') == null ? textInfo : document.querySelector('input[name="freteConta"]:checked').value,
          
          parcelas: document.querySelector('#Inputparcelas') == null ? textInfo : document.querySelector('#Inputparcelas').value
          
          }
          
          
        
  
        fetch('https://projeto.andersonhenri15.repl.co/registrarBancoDados', {
    method: "POST",
    body: JSON.stringify(obj, null, 2),
    headers: {"Content-type": "text/plain; charset=UTF-8",
             "Sector": pegar}
  })
  .then(function(res){ return res.json() })
  .then(function(data){ 
    alert( data.msg ) 
    window.location.reload();

  })
      }

      
      function formaPagamentoVerificação() {
  switch(document.querySelector('input[name="formaPgo"]:checked').value) {
        case "avista":
      return document.querySelector('input[name="formaPagamento"]:checked').value
        break
        case "cartao":
          return document.querySelector('input[name="bandeira"]:checked').value
        break
        default:
          return document.querySelector('input[name="formaPgo"]:checked').value
        }
      }
    </script>
  </body>
</html>